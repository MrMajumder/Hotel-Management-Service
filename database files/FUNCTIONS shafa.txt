CREATE OR REPLACE FUNCTION GETROOMS(RESID IN VARCHAR2)
RETURN VARCHAR2 IS
	ANS VARCHAR2(1024) := '';
BEGIN
	FOR X IN (SELECT ROOM_ID FROM ROOM WHERE RESERVATION_ID = RESID)
	LOOP
		IF(ANS IS NULL) THEN
			ANS := X.ROOM_ID;
		ELSE
			ANS := (ANS ||','|| X.ROOM_ID);
		END IF;
	END LOOP;
	RETURN ANS;
EXCEPTION
	WHEN NO_DATA_FOUND THEN
		RETURN 0;
END;
/


CREATE OR REPLACE FUNCTION GETSERV(RESID IN VARCHAR2)
RETURN VARCHAR2 IS
	BID NUMBER;
	ANS VARCHAR2(1024) := '';
BEGIN
	SELECT BILL_ID INTO BID FROM HOTEL_BILL WHERE RESERVATION_ID = RESID;
	FOR X IN (SELECT SERVICE_ID FROM ROOM_HB_SERV_RECEIVES WHERE BILL_ID = BID)
	LOOP
		IF(ANS IS NULL) THEN
			ANS := X.SERVICE_ID;
		ELSE
			ANS := (ANS ||','|| X.SERVICE_ID);
		END IF;
	END LOOP;
	RETURN ANS;
EXCEPTION
	WHEN NO_DATA_FOUND THEN
		RETURN 0;
END;
/

CREATE OR REPLACE FUNCTION GETSERVACTIONID(RESID IN VARCHAR2)
RETURN VARCHAR2 IS
	BID NUMBER;
	ANS VARCHAR2(1024) := '';
BEGIN
	SELECT BILL_ID INTO BID FROM HOTEL_BILL WHERE RESERVATION_ID = RESID;
	FOR X IN (SELECT ACTION_ID FROM ROOM_HB_SERV_RECEIVES WHERE BILL_ID = BID)
	LOOP
		IF(ANS IS NULL) THEN
			ANS := X.ACTION_ID;
		ELSE
			ANS := (ANS ||','|| X.ACTION_ID);
		END IF;
	END LOOP;
	RETURN ANS;
EXCEPTION
	WHEN NO_DATA_FOUND THEN
		RETURN 0;
END;
/


CREATE OR REPLACE FUNCTION GETSERVROOMS(RESID IN VARCHAR2)
RETURN VARCHAR2 IS
	BID NUMBER;
	ANS VARCHAR2(1024) := '';
BEGIN
	SELECT BILL_ID INTO BID FROM HOTEL_BILL WHERE RESERVATION_ID = RESID;
	FOR X IN (SELECT ROOM_ID FROM ROOM_HB_SERV_RECEIVES WHERE BILL_ID = BID)
	LOOP
		IF(ANS IS NULL) THEN
			ANS := X.ROOM_ID;
		ELSE
			ANS := (ANS ||','|| X.ROOM_ID);
		END IF;
	END LOOP;
	RETURN ANS;
EXCEPTION
	WHEN NO_DATA_FOUND THEN
		RETURN 0;
END;
/

CREATE OR REPLACE FUNCTION GETBILLIDS(UID IN VARCHAR2)
RETURN VARCHAR2 IS
	BID NUMBER;
	ANS VARCHAR2(1024) := '';
BEGIN
	ANS := '(1001, 1002, 1003)';
	RETURN ANS;
EXCEPTION
	WHEN NO_DATA_FOUND THEN
		RETURN 0;
END;
/
